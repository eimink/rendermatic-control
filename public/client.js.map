{"version":3,"file":"client.js","mappings":";;;;;;;AAAa;AACb,6BAA6C,EAAE,aAAa,CAAC;AAC7D,yBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,0BAA0B;AACrD;AACA;AACA,2BAA2B,kCAAkC;AAC7D;AACA;AACA,2BAA2B,iCAAiC;AAC5D;AACA;AACA,yBAAqB;AACrB;AACA","sources":["webpack://rendermatic-control/./src/browser-client.ts"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ControlClient = void 0;\nclass ControlClient {\n    constructor(serverUrl) {\n        this.serverUrl = serverUrl;\n        this.textureList = [];\n        this.onTexturesUpdated = null;\n        this.ws = new WebSocket(serverUrl);\n        this.setupEventHandlers();\n    }\n    setupEventHandlers() {\n        this.ws.onopen = () => {\n            console.log('Connected to server');\n            document.body.classList.remove('disconnected');\n        };\n        this.ws.onmessage = (event) => {\n            const response = JSON.parse(event.data);\n            console.log('Received:', response);\n            if (response.command === 'texture_list' && response.textures) {\n                this.textureList = response.textures;\n                this.onTexturesUpdated?.(this.textureList);\n            }\n            else if (response.command === 'scan_textures_response' && response.textures) {\n                this.textureList = response.textures;\n                this.onTexturesUpdated?.(this.textureList);\n            }\n        };\n        this.ws.onerror = (error) => {\n            console.error('WebSocket error:', error);\n        };\n        this.ws.onclose = () => {\n            console.log('Disconnected from server');\n            document.body.classList.add('disconnected');\n        };\n    }\n    sendCommand(command) {\n        if (this.ws.readyState === WebSocket.OPEN) {\n            this.ws.send(JSON.stringify(command));\n        }\n        else {\n            console.error('WebSocket is not connected');\n        }\n    }\n    setTexturesCallback(callback) {\n        this.onTexturesUpdated = callback;\n    }\n    refreshTextures() {\n        this.sendCommand({ command: 'scan_textures' });\n    }\n    loadTexture(texture) {\n        this.sendCommand({ command: 'load_texture', texture });\n    }\n    setTexture(texture) {\n        this.sendCommand({ command: 'set_texture', texture });\n    }\n}\nexports.ControlClient = ControlClient;\n// Make ControlClient available globally\nwindow.ControlClient = ControlClient;\n"],"names":[],"sourceRoot":""}